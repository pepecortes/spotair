<!DOCTYPE html>

<html>
<head>
  <title>lunr.min.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="../../../source_doc/docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>lunr.min.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/**
 * lunr - http://lunrjs.com - A bit like Solr, but much smaller and not as bright - 0.7.1
 * Copyright (C) 2016 Oliver Nightingale
 * @license MIT
 */</span>
!<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">new</span> t.Index;<span class="hljs-keyword">return</span> n.pipeline.add(t.trimmer,t.stopWordFilter,t.stemmer),e&amp;&amp;e.call(n,n),n};t.version=<span class="hljs-string">"0.7.1"</span>,t.utils={},t.utils.warn=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{t.console&amp;&amp;<span class="hljs-built_in">console</span>.warn&amp;&amp;<span class="hljs-built_in">console</span>.warn(e)}}(<span class="hljs-keyword">this</span>),t.utils.asString=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===t||<span class="hljs-literal">null</span>===t?<span class="hljs-string">""</span>:t.toString()},t.EventEmitter=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.events={}},t.EventEmitter.prototype.addListener=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>),e=t.pop(),n=t;<span class="hljs-keyword">if</span>(<span class="hljs-string">"function"</span>!=<span class="hljs-keyword">typeof</span> e)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">"last argument must be a function"</span>);n.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">this</span>.hasHandler(t)||(<span class="hljs-keyword">this</span>.events[t]=[]),<span class="hljs-keyword">this</span>.events[t].push(e)},<span class="hljs-keyword">this</span>)},t.EventEmitter.prototype.removeListener=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.hasHandler(t)){<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">this</span>.events[t].indexOf(e);<span class="hljs-keyword">this</span>.events[t].splice(n,<span class="hljs-number">1</span>),<span class="hljs-keyword">this</span>.events[t].length||<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.events[t]}},t.EventEmitter.prototype.emit=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.hasHandler(t)){<span class="hljs-keyword">var</span> e=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>);<span class="hljs-keyword">this</span>.events[t].forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{t.apply(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,e)})}},t.EventEmitter.prototype.hasHandler=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.events},t.tokenizer=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">arguments</span>.length&amp;&amp;<span class="hljs-literal">null</span>!=e&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!=e?<span class="hljs-built_in">Array</span>.isArray(e)?e.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">return</span> t.utils.asString(e).toLowerCase()}):e.toString().trim().toLowerCase().split(t.tokenizer.seperator):[]},t.tokenizer.seperator=<span class="hljs-regexp">/[\s\-]+/</span>,t.tokenizer.load=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">this</span>.registeredFunctions[t];<span class="hljs-keyword">if</span>(!e)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Cannot load un-registered function: "</span>+t);<span class="hljs-keyword">return</span> e},t.tokenizer.label=<span class="hljs-string">"default"</span>,t.tokenizer.registeredFunctions={<span class="hljs-string">"default"</span>:t.tokenizer},t.tokenizer.registerFunction=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n</span>)</span>{n <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.registeredFunctions&amp;&amp;t.utils.warn(<span class="hljs-string">"Overwriting existing tokenizer: "</span>+n),e.label=n,<span class="hljs-keyword">this</span>.registeredFunctions[n]=e},t.Pipeline=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>._stack=[]},t.Pipeline.registeredFunctions={},t.Pipeline.registerFunction=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n</span>)</span>{n <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.registeredFunctions&amp;&amp;t.utils.warn(<span class="hljs-string">"Overwriting existing registered function: "</span>+n),e.label=n,t.Pipeline.registeredFunctions[e.label]=e},t.Pipeline.warnIfFunctionNotRegistered=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">var</span> n=e.label&amp;&amp;e.label <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.registeredFunctions;n||t.utils.warn(<span class="hljs-string">"Function is not registered with pipeline. This may cause problems when serialising the index.\n"</span>,e)},t.Pipeline.load=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">new</span> t.Pipeline;<span class="hljs-keyword">return</span> e.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">var</span> i=t.Pipeline.registeredFunctions[e];<span class="hljs-keyword">if</span>(!i)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Cannot load un-registered function: "</span>+e);n.add(i)}),n},t.Pipeline.prototype.add=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>);e.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{t.Pipeline.warnIfFunctionNotRegistered(e),<span class="hljs-keyword">this</span>._stack.push(e)},<span class="hljs-keyword">this</span>)},t.Pipeline.prototype.after=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n</span>)</span>{t.Pipeline.warnIfFunctionNotRegistered(n);<span class="hljs-keyword">var</span> i=<span class="hljs-keyword">this</span>._stack.indexOf(e);<span class="hljs-keyword">if</span>(<span class="hljs-number">-1</span>==i)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Cannot find existingFn"</span>);i+=<span class="hljs-number">1</span>,<span class="hljs-keyword">this</span>._stack.splice(i,<span class="hljs-number">0</span>,n)},t.Pipeline.prototype.before=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n</span>)</span>{t.Pipeline.warnIfFunctionNotRegistered(n);<span class="hljs-keyword">var</span> i=<span class="hljs-keyword">this</span>._stack.indexOf(e);<span class="hljs-keyword">if</span>(<span class="hljs-number">-1</span>==i)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Cannot find existingFn"</span>);<span class="hljs-keyword">this</span>._stack.splice(i,<span class="hljs-number">0</span>,n)},t.Pipeline.prototype.remove=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">this</span>._stack.indexOf(t);<span class="hljs-number">-1</span>!=e&amp;&amp;<span class="hljs-keyword">this</span>._stack.splice(e,<span class="hljs-number">1</span>)},t.Pipeline.prototype.run=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=[],n=t.length,i=<span class="hljs-keyword">this</span>._stack.length,r=<span class="hljs-number">0</span>;n&gt;r;r++){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o=t[r],s=<span class="hljs-number">0</span>;i&gt;s&amp;&amp;(o=<span class="hljs-keyword">this</span>._stack[s](o,r,t),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==o&amp;&amp;<span class="hljs-string">""</span>!==o);s++);<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==o&amp;&amp;<span class="hljs-string">""</span>!==o&amp;&amp;e.push(o)}<span class="hljs-keyword">return</span> e},t.Pipeline.prototype.reset=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>._stack=[]},t.Pipeline.prototype.toJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._stack.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">return</span> t.Pipeline.warnIfFunctionNotRegistered(e),e.label})},t.Vector=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>._magnitude=<span class="hljs-literal">null</span>,<span class="hljs-keyword">this</span>.list=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.length=<span class="hljs-number">0</span>},t.Vector.Node=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e,n</span>)</span>{<span class="hljs-keyword">this</span>.idx=t,<span class="hljs-keyword">this</span>.val=e,<span class="hljs-keyword">this</span>.next=n},t.Vector.prototype.insert=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n</span>)</span>{<span class="hljs-keyword">this</span>._magnitude=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;<span class="hljs-keyword">var</span> i=<span class="hljs-keyword">this</span>.list;<span class="hljs-keyword">if</span>(!i)<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.list=<span class="hljs-keyword">new</span> t.Vector.Node(e,n,i),<span class="hljs-keyword">this</span>.length++;<span class="hljs-keyword">if</span>(e&lt;i.idx)<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.list=<span class="hljs-keyword">new</span> t.Vector.Node(e,n,i),<span class="hljs-keyword">this</span>.length++;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=i,o=i.next;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!=o;){<span class="hljs-keyword">if</span>(e&lt;o.idx)<span class="hljs-keyword">return</span> r.next=<span class="hljs-keyword">new</span> t.Vector.Node(e,n,o),<span class="hljs-keyword">this</span>.length++;r=o,o=o.next}<span class="hljs-keyword">return</span> r.next=<span class="hljs-keyword">new</span> t.Vector.Node(e,n,o),<span class="hljs-keyword">this</span>.length++},t.Vector.prototype.magnitude=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>._magnitude)<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._magnitude;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> t,e=<span class="hljs-keyword">this</span>.list,n=<span class="hljs-number">0</span>;e;)t=e.val,n+=t*t,e=e.next;<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._magnitude=<span class="hljs-built_in">Math</span>.sqrt(n)},t.Vector.prototype.dot=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">this</span>.list,n=t.list,i=<span class="hljs-number">0</span>;e&amp;&amp;n;)e.idx&lt;n.idx?e=e.next:e.idx&gt;n.idx?n=n.next:(i+=e.val*n.val,e=e.next,n=n.next);<span class="hljs-keyword">return</span> i},t.Vector.prototype.similarity=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.dot(t)/(<span class="hljs-keyword">this</span>.magnitude()*t.magnitude())},t.SortedSet=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.length=<span class="hljs-number">0</span>,<span class="hljs-keyword">this</span>.elements=[]},t.SortedSet.load=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>;<span class="hljs-keyword">return</span> e.elements=t,e.length=t.length,e},t.SortedSet.prototype.add=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t,e;<span class="hljs-keyword">for</span>(t=<span class="hljs-number">0</span>;t&lt;<span class="hljs-built_in">arguments</span>.length;t++)e=<span class="hljs-built_in">arguments</span>[t],~<span class="hljs-keyword">this</span>.indexOf(e)||<span class="hljs-keyword">this</span>.elements.splice(<span class="hljs-keyword">this</span>.locationFor(e),<span class="hljs-number">0</span>,e);<span class="hljs-keyword">this</span>.length=<span class="hljs-keyword">this</span>.elements.length},t.SortedSet.prototype.toArray=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.elements.slice()},t.SortedSet.prototype.map=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.elements.map(t,e)},t.SortedSet.prototype.forEach=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.elements.forEach(t,e)},t.SortedSet.prototype.indexOf=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=<span class="hljs-number">0</span>,n=<span class="hljs-keyword">this</span>.elements.length,i=n-e,r=e+<span class="hljs-built_in">Math</span>.floor(i/<span class="hljs-number">2</span>),o=<span class="hljs-keyword">this</span>.elements[r];i&gt;<span class="hljs-number">1</span>;){<span class="hljs-keyword">if</span>(o===t)<span class="hljs-keyword">return</span> r;t&gt;o&amp;&amp;(e=r),o&gt;t&amp;&amp;(n=r),i=n-e,r=e+<span class="hljs-built_in">Math</span>.floor(i/<span class="hljs-number">2</span>),o=<span class="hljs-keyword">this</span>.elements[r]}<span class="hljs-keyword">return</span> o===t?r:<span class="hljs-number">-1</span>},t.SortedSet.prototype.locationFor=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=<span class="hljs-number">0</span>,n=<span class="hljs-keyword">this</span>.elements.length,i=n-e,r=e+<span class="hljs-built_in">Math</span>.floor(i/<span class="hljs-number">2</span>),o=<span class="hljs-keyword">this</span>.elements[r];i&gt;<span class="hljs-number">1</span>;)t&gt;o&amp;&amp;(e=r),o&gt;t&amp;&amp;(n=r),i=n-e,r=e+<span class="hljs-built_in">Math</span>.floor(i/<span class="hljs-number">2</span>),o=<span class="hljs-keyword">this</span>.elements[r];<span class="hljs-keyword">return</span> o&gt;t?r:t&gt;o?r+<span class="hljs-number">1</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},t.SortedSet.prototype.intersect=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">new</span> t.SortedSet,i=<span class="hljs-number">0</span>,r=<span class="hljs-number">0</span>,o=<span class="hljs-keyword">this</span>.length,s=e.length,a=<span class="hljs-keyword">this</span>.elements,h=e.elements;;){<span class="hljs-keyword">if</span>(i&gt;o<span class="hljs-number">-1</span>||r&gt;s<span class="hljs-number">-1</span>)<span class="hljs-keyword">break</span>;a[i]!==h[r]?a[i]&lt;h[r]?i++:a[i]&gt;h[r]&amp;&amp;r++:(n.add(a[i]),i++,r++)}<span class="hljs-keyword">return</span> n},t.SortedSet.prototype.clone=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">new</span> t.SortedSet;<span class="hljs-keyword">return</span> e.elements=<span class="hljs-keyword">this</span>.toArray(),e.length=e.elements.length,e},t.SortedSet.prototype.union=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e,n,i;<span class="hljs-keyword">this</span>.length&gt;=t.length?(e=<span class="hljs-keyword">this</span>,n=t):(e=t,n=<span class="hljs-keyword">this</span>),i=e.clone();<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=<span class="hljs-number">0</span>,o=n.toArray();r&lt;o.length;r++)i.add(o[r]);<span class="hljs-keyword">return</span> i},t.SortedSet.prototype.toJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.toArray()},t.Index=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>._fields=[],<span class="hljs-keyword">this</span>._ref=<span class="hljs-string">"id"</span>,<span class="hljs-keyword">this</span>.pipeline=<span class="hljs-keyword">new</span> t.Pipeline,<span class="hljs-keyword">this</span>.documentStore=<span class="hljs-keyword">new</span> t.Store,<span class="hljs-keyword">this</span>.tokenStore=<span class="hljs-keyword">new</span> t.TokenStore,<span class="hljs-keyword">this</span>.corpusTokens=<span class="hljs-keyword">new</span> t.SortedSet,<span class="hljs-keyword">this</span>.eventEmitter=<span class="hljs-keyword">new</span> t.EventEmitter,<span class="hljs-keyword">this</span>.tokenizerFn=t.tokenizer,<span class="hljs-keyword">this</span>._idfCache={},<span class="hljs-keyword">this</span>.on(<span class="hljs-string">"add"</span>,<span class="hljs-string">"remove"</span>,<span class="hljs-string">"update"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>._idfCache={}}.bind(<span class="hljs-keyword">this</span>))},t.Index.prototype.on=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>);<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.eventEmitter.addListener.apply(<span class="hljs-keyword">this</span>.eventEmitter,t)},t.Index.prototype.off=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.eventEmitter.removeListener(t,e)},t.Index.load=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{e.version!==t.version&amp;&amp;t.utils.warn(<span class="hljs-string">"version mismatch: current "</span>+t.version+<span class="hljs-string">" importing "</span>+e.version);<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>;<span class="hljs-keyword">return</span> n._fields=e.fields,n._ref=e.ref,n.tokenizer=t.tokenizer.load(e.tokenizer),n.documentStore=t.Store.load(e.documentStore),n.tokenStore=t.TokenStore.load(e.tokenStore),n.corpusTokens=t.SortedSet.load(e.corpusTokens),n.pipeline=t.Pipeline.load(e.pipeline),n},t.Index.prototype.field=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> e=e||{},n={<span class="hljs-attr">name</span>:t,<span class="hljs-attr">boost</span>:e.boost||<span class="hljs-number">1</span>};<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._fields.push(n),<span class="hljs-keyword">this</span>},t.Index.prototype.ref=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._ref=t,<span class="hljs-keyword">this</span>},t.Index.prototype.tokenizer=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">var</span> n=e.label&amp;&amp;e.label <span class="hljs-keyword">in</span> t.tokenizer.registeredFunctions;<span class="hljs-keyword">return</span> n||t.utils.warn(<span class="hljs-string">"Function is not a registered tokenizer. This may cause problems when serialising the index"</span>),<span class="hljs-keyword">this</span>.tokenizerFn=e,<span class="hljs-keyword">this</span>},t.Index.prototype.add=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n</span>)</span>{<span class="hljs-keyword">var</span> i={},r=<span class="hljs-keyword">new</span> t.SortedSet,o=e[<span class="hljs-keyword">this</span>._ref],n=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===n?!<span class="hljs-number">0</span>:n;<span class="hljs-keyword">this</span>._fields.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">this</span>.pipeline.run(<span class="hljs-keyword">this</span>.tokenizerFn(e[t.name]));i[t.name]=n;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o=<span class="hljs-number">0</span>;o&lt;n.length;o++){<span class="hljs-keyword">var</span> s=n[o];r.add(s),<span class="hljs-keyword">this</span>.corpusTokens.add(s)}},<span class="hljs-keyword">this</span>),<span class="hljs-keyword">this</span>.documentStore.set(o,r);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> s=<span class="hljs-number">0</span>;s&lt;r.length;s++){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> a=r.elements[s],h=<span class="hljs-number">0</span>,u=<span class="hljs-number">0</span>;u&lt;<span class="hljs-keyword">this</span>._fields.length;u++){<span class="hljs-keyword">var</span> l=<span class="hljs-keyword">this</span>._fields[u],c=i[l.name],f=c.length;<span class="hljs-keyword">if</span>(f){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> d=<span class="hljs-number">0</span>,p=<span class="hljs-number">0</span>;f&gt;p;p++)c[p]===a&amp;&amp;d++;h+=d/f*l.boost}}<span class="hljs-keyword">this</span>.tokenStore.add(a,{<span class="hljs-attr">ref</span>:o,<span class="hljs-attr">tf</span>:h})}n&amp;&amp;<span class="hljs-keyword">this</span>.eventEmitter.emit(<span class="hljs-string">"add"</span>,e,<span class="hljs-keyword">this</span>)},t.Index.prototype.remove=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n=t[<span class="hljs-keyword">this</span>._ref],e=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===e?!<span class="hljs-number">0</span>:e;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.documentStore.has(n)){<span class="hljs-keyword">var</span> i=<span class="hljs-keyword">this</span>.documentStore.get(n);<span class="hljs-keyword">this</span>.documentStore.remove(n),i.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">this</span>.tokenStore.remove(t,n)},<span class="hljs-keyword">this</span>),e&amp;&amp;<span class="hljs-keyword">this</span>.eventEmitter.emit(<span class="hljs-string">"remove"</span>,t,<span class="hljs-keyword">this</span>)}},t.Index.prototype.update=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===e?!<span class="hljs-number">0</span>:e;<span class="hljs-keyword">this</span>.remove(t,!<span class="hljs-number">1</span>),<span class="hljs-keyword">this</span>.add(t,!<span class="hljs-number">1</span>),e&amp;&amp;<span class="hljs-keyword">this</span>.eventEmitter.emit(<span class="hljs-string">"update"</span>,t,<span class="hljs-keyword">this</span>)},t.Index.prototype.idf=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e=<span class="hljs-string">"@"</span>+t;<span class="hljs-keyword">if</span>(<span class="hljs-built_in">Object</span>.prototype.hasOwnProperty.call(<span class="hljs-keyword">this</span>._idfCache,e))<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._idfCache[e];<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">this</span>.tokenStore.count(t),i=<span class="hljs-number">1</span>;<span class="hljs-keyword">return</span> n&gt;<span class="hljs-number">0</span>&amp;&amp;(i=<span class="hljs-number">1</span>+<span class="hljs-built_in">Math</span>.log(<span class="hljs-keyword">this</span>.documentStore.length/n)),<span class="hljs-keyword">this</span>._idfCache[e]=i},t.Index.prototype.search=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">this</span>.pipeline.run(<span class="hljs-keyword">this</span>.tokenizerFn(e)),i=<span class="hljs-keyword">new</span> t.Vector,r=[],o=<span class="hljs-keyword">this</span>._fields.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> t+e.boost},<span class="hljs-number">0</span>),s=n.some(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.tokenStore.has(t)},<span class="hljs-keyword">this</span>);<span class="hljs-keyword">if</span>(!s)<span class="hljs-keyword">return</span>[];n.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e,n,s</span>)</span>{<span class="hljs-keyword">var</span> a=<span class="hljs-number">1</span>/s.length*<span class="hljs-keyword">this</span>._fields.length*o,h=<span class="hljs-keyword">this</span>,u=<span class="hljs-keyword">this</span>.tokenStore.expand(e).reduce(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n,r</span>)</span>{<span class="hljs-keyword">var</span> o=h.corpusTokens.indexOf(r),s=h.idf(r),u=<span class="hljs-number">1</span>,l=<span class="hljs-keyword">new</span> t.SortedSet;<span class="hljs-keyword">if</span>(r!==e){<span class="hljs-keyword">var</span> c=<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">3</span>,r.length-e.length);u=<span class="hljs-number">1</span>/<span class="hljs-built_in">Math</span>.log(c)}o&gt;<span class="hljs-number">-1</span>&amp;&amp;i.insert(o,a*s*u);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> f=h.tokenStore.get(r),d=<span class="hljs-built_in">Object</span>.keys(f),p=d.length,v=<span class="hljs-number">0</span>;p&gt;v;v++)l.add(f[d[v]].ref);<span class="hljs-keyword">return</span> n.union(l)},<span class="hljs-keyword">new</span> t.SortedSet);r.push(u)},<span class="hljs-keyword">this</span>);<span class="hljs-keyword">var</span> a=r.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> t.intersect(e)});<span class="hljs-keyword">return</span> a.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span>{<span class="hljs-attr">ref</span>:t,<span class="hljs-attr">score</span>:i.similarity(<span class="hljs-keyword">this</span>.documentVector(t))}},<span class="hljs-keyword">this</span>).sort(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> e.score-t.score})},t.Index.prototype.documentVector=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">this</span>.documentStore.get(e),i=n.length,r=<span class="hljs-keyword">new</span> t.Vector,o=<span class="hljs-number">0</span>;i&gt;o;o++){<span class="hljs-keyword">var</span> s=n.elements[o],a=<span class="hljs-keyword">this</span>.tokenStore.get(s)[e].tf,h=<span class="hljs-keyword">this</span>.idf(s);r.insert(<span class="hljs-keyword">this</span>.corpusTokens.indexOf(s),a*h)}<span class="hljs-keyword">return</span> r},t.Index.prototype.toJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>{<span class="hljs-attr">version</span>:t.version,<span class="hljs-attr">fields</span>:<span class="hljs-keyword">this</span>._fields,<span class="hljs-attr">ref</span>:<span class="hljs-keyword">this</span>._ref,<span class="hljs-attr">tokenizer</span>:<span class="hljs-keyword">this</span>.tokenizerFn.label,<span class="hljs-attr">documentStore</span>:<span class="hljs-keyword">this</span>.documentStore.toJSON(),<span class="hljs-attr">tokenStore</span>:<span class="hljs-keyword">this</span>.tokenStore.toJSON(),<span class="hljs-attr">corpusTokens</span>:<span class="hljs-keyword">this</span>.corpusTokens.toJSON(),<span class="hljs-attr">pipeline</span>:<span class="hljs-keyword">this</span>.pipeline.toJSON()}},t.Index.prototype.use=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e=<span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>);e.unshift(<span class="hljs-keyword">this</span>),t.apply(<span class="hljs-keyword">this</span>,e)},t.Store=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.store={},<span class="hljs-keyword">this</span>.length=<span class="hljs-number">0</span>},t.Store.load=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>;<span class="hljs-keyword">return</span> n.length=e.length,n.store=<span class="hljs-built_in">Object</span>.keys(e.store).reduce(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n,i</span>)</span>{<span class="hljs-keyword">return</span> n[i]=t.SortedSet.load(e.store[i]),n},{}),n},t.Store.prototype.set=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">this</span>.has(t)||<span class="hljs-keyword">this</span>.length++,<span class="hljs-keyword">this</span>.store[t]=e},t.Store.prototype.get=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.store[t]},t.Store.prototype.has=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.store},t.Store.prototype.remove=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">this</span>.has(t)&amp;&amp;(<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.store[t],<span class="hljs-keyword">this</span>.length--)},t.Store.prototype.toJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>{<span class="hljs-attr">store</span>:<span class="hljs-keyword">this</span>.store,<span class="hljs-attr">length</span>:<span class="hljs-keyword">this</span>.length}},t.stemmer=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> t={<span class="hljs-attr">ational</span>:<span class="hljs-string">"ate"</span>,<span class="hljs-attr">tional</span>:<span class="hljs-string">"tion"</span>,<span class="hljs-attr">enci</span>:<span class="hljs-string">"ence"</span>,<span class="hljs-attr">anci</span>:<span class="hljs-string">"ance"</span>,<span class="hljs-attr">izer</span>:<span class="hljs-string">"ize"</span>,<span class="hljs-attr">bli</span>:<span class="hljs-string">"ble"</span>,<span class="hljs-attr">alli</span>:<span class="hljs-string">"al"</span>,<span class="hljs-attr">entli</span>:<span class="hljs-string">"ent"</span>,<span class="hljs-attr">eli</span>:<span class="hljs-string">"e"</span>,<span class="hljs-attr">ousli</span>:<span class="hljs-string">"ous"</span>,<span class="hljs-attr">ization</span>:<span class="hljs-string">"ize"</span>,<span class="hljs-attr">ation</span>:<span class="hljs-string">"ate"</span>,<span class="hljs-attr">ator</span>:<span class="hljs-string">"ate"</span>,<span class="hljs-attr">alism</span>:<span class="hljs-string">"al"</span>,<span class="hljs-attr">iveness</span>:<span class="hljs-string">"ive"</span>,<span class="hljs-attr">fulness</span>:<span class="hljs-string">"ful"</span>,<span class="hljs-attr">ousness</span>:<span class="hljs-string">"ous"</span>,<span class="hljs-attr">aliti</span>:<span class="hljs-string">"al"</span>,<span class="hljs-attr">iviti</span>:<span class="hljs-string">"ive"</span>,<span class="hljs-attr">biliti</span>:<span class="hljs-string">"ble"</span>,<span class="hljs-attr">logi</span>:<span class="hljs-string">"log"</span>},e={<span class="hljs-attr">icate</span>:<span class="hljs-string">"ic"</span>,<span class="hljs-attr">ative</span>:<span class="hljs-string">""</span>,<span class="hljs-attr">alize</span>:<span class="hljs-string">"al"</span>,<span class="hljs-attr">iciti</span>:<span class="hljs-string">"ic"</span>,<span class="hljs-attr">ical</span>:<span class="hljs-string">"ic"</span>,<span class="hljs-attr">ful</span>:<span class="hljs-string">""</span>,<span class="hljs-attr">ness</span>:<span class="hljs-string">""</span>},n=<span class="hljs-string">"[^aeiou]"</span>,i=<span class="hljs-string">"[aeiouy]"</span>,r=n+<span class="hljs-string">"[^aeiouy]*"</span>,o=i+<span class="hljs-string">"[aeiou]*"</span>,s=<span class="hljs-string">"^("</span>+r+<span class="hljs-string">")?"</span>+o+r,a=<span class="hljs-string">"^("</span>+r+<span class="hljs-string">")?"</span>+o+r+<span class="hljs-string">"("</span>+o+<span class="hljs-string">")?$"</span>,h=<span class="hljs-string">"^("</span>+r+<span class="hljs-string">")?"</span>+o+r+o+r,u=<span class="hljs-string">"^("</span>+r+<span class="hljs-string">")?"</span>+i,l=<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(s),c=<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(h),f=<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(a),d=<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(u),p=<span class="hljs-regexp">/^(.+?)(ss|i)es$/</span>,v=<span class="hljs-regexp">/^(.+?)([^s])s$/</span>,g=<span class="hljs-regexp">/^(.+?)eed$/</span>,m=<span class="hljs-regexp">/^(.+?)(ed|ing)$/</span>,y=<span class="hljs-regexp">/.$/</span>,S=<span class="hljs-regexp">/(at|bl|iz)$/</span>,w=<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">"([^aeiouylsz])\\1$"</span>),k=<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">"^"</span>+r+i+<span class="hljs-string">"[^aeiouwxy]$"</span>),x=<span class="hljs-regexp">/^(.+?[^aeiou])y$/</span>,b=<span class="hljs-regexp">/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/</span>,E=<span class="hljs-regexp">/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/</span>,F=<span class="hljs-regexp">/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/</span>,_=<span class="hljs-regexp">/^(.+?)(s|t)(ion)$/</span>,z=<span class="hljs-regexp">/^(.+?)e$/</span>,O=<span class="hljs-regexp">/ll$/</span>,P=<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">"^"</span>+r+i+<span class="hljs-string">"[^aeiouwxy]$"</span>),T=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{<span class="hljs-keyword">var</span> i,r,o,s,a,h,u;<span class="hljs-keyword">if</span>(n.length&lt;<span class="hljs-number">3</span>)<span class="hljs-keyword">return</span> n;<span class="hljs-keyword">if</span>(o=n.substr(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>),<span class="hljs-string">"y"</span>==o&amp;&amp;(n=o.toUpperCase()+n.substr(<span class="hljs-number">1</span>)),s=p,a=v,s.test(n)?n=n.replace(s,<span class="hljs-string">"$1$2"</span>):a.test(n)&amp;&amp;(n=n.replace(a,<span class="hljs-string">"$1$2"</span>)),s=g,a=m,s.test(n)){<span class="hljs-keyword">var</span> T=s.exec(n);s=l,s.test(T[<span class="hljs-number">1</span>])&amp;&amp;(s=y,n=n.replace(s,<span class="hljs-string">""</span>))}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a.test(n)){<span class="hljs-keyword">var</span> T=a.exec(n);i=T[<span class="hljs-number">1</span>],a=d,a.test(i)&amp;&amp;(n=i,a=S,h=w,u=k,a.test(n)?n+=<span class="hljs-string">"e"</span>:h.test(n)?(s=y,n=n.replace(s,<span class="hljs-string">""</span>)):u.test(n)&amp;&amp;(n+=<span class="hljs-string">"e"</span>))}<span class="hljs-keyword">if</span>(s=x,s.test(n)){<span class="hljs-keyword">var</span> T=s.exec(n);i=T[<span class="hljs-number">1</span>],n=i+<span class="hljs-string">"i"</span>}<span class="hljs-keyword">if</span>(s=b,s.test(n)){<span class="hljs-keyword">var</span> T=s.exec(n);i=T[<span class="hljs-number">1</span>],r=T[<span class="hljs-number">2</span>],s=l,s.test(i)&amp;&amp;(n=i+t[r])}<span class="hljs-keyword">if</span>(s=E,s.test(n)){<span class="hljs-keyword">var</span> T=s.exec(n);i=T[<span class="hljs-number">1</span>],r=T[<span class="hljs-number">2</span>],s=l,s.test(i)&amp;&amp;(n=i+e[r])}<span class="hljs-keyword">if</span>(s=F,a=_,s.test(n)){<span class="hljs-keyword">var</span> T=s.exec(n);i=T[<span class="hljs-number">1</span>],s=c,s.test(i)&amp;&amp;(n=i)}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a.test(n)){<span class="hljs-keyword">var</span> T=a.exec(n);i=T[<span class="hljs-number">1</span>]+T[<span class="hljs-number">2</span>],a=c,a.test(i)&amp;&amp;(n=i)}<span class="hljs-keyword">if</span>(s=z,s.test(n)){<span class="hljs-keyword">var</span> T=s.exec(n);i=T[<span class="hljs-number">1</span>],s=c,a=f,h=P,(s.test(i)||a.test(i)&amp;&amp;!h.test(i))&amp;&amp;(n=i)}<span class="hljs-keyword">return</span> s=O,a=c,s.test(n)&amp;&amp;a.test(n)&amp;&amp;(s=y,n=n.replace(s,<span class="hljs-string">""</span>)),<span class="hljs-string">"y"</span>==o&amp;&amp;(n=o.toLowerCase()+n.substr(<span class="hljs-number">1</span>)),n};<span class="hljs-keyword">return</span> T}(),t.Pipeline.registerFunction(t.stemmer,<span class="hljs-string">"stemmer"</span>),t.generateStopWordFilter=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e=t.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> t[e]=e,t},{});<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t&amp;&amp;e[t]!==t?t:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}},t.stopWordFilter=t.generateStopWordFilter([<span class="hljs-string">"a"</span>,<span class="hljs-string">"able"</span>,<span class="hljs-string">"about"</span>,<span class="hljs-string">"across"</span>,<span class="hljs-string">"after"</span>,<span class="hljs-string">"all"</span>,<span class="hljs-string">"almost"</span>,<span class="hljs-string">"also"</span>,<span class="hljs-string">"am"</span>,<span class="hljs-string">"among"</span>,<span class="hljs-string">"an"</span>,<span class="hljs-string">"and"</span>,<span class="hljs-string">"any"</span>,<span class="hljs-string">"are"</span>,<span class="hljs-string">"as"</span>,<span class="hljs-string">"at"</span>,<span class="hljs-string">"be"</span>,<span class="hljs-string">"because"</span>,<span class="hljs-string">"been"</span>,<span class="hljs-string">"but"</span>,<span class="hljs-string">"by"</span>,<span class="hljs-string">"can"</span>,<span class="hljs-string">"cannot"</span>,<span class="hljs-string">"could"</span>,<span class="hljs-string">"dear"</span>,<span class="hljs-string">"did"</span>,<span class="hljs-string">"do"</span>,<span class="hljs-string">"does"</span>,<span class="hljs-string">"either"</span>,<span class="hljs-string">"else"</span>,<span class="hljs-string">"ever"</span>,<span class="hljs-string">"every"</span>,<span class="hljs-string">"for"</span>,<span class="hljs-string">"from"</span>,<span class="hljs-string">"get"</span>,<span class="hljs-string">"got"</span>,<span class="hljs-string">"had"</span>,<span class="hljs-string">"has"</span>,<span class="hljs-string">"have"</span>,<span class="hljs-string">"he"</span>,<span class="hljs-string">"her"</span>,<span class="hljs-string">"hers"</span>,<span class="hljs-string">"him"</span>,<span class="hljs-string">"his"</span>,<span class="hljs-string">"how"</span>,<span class="hljs-string">"however"</span>,<span class="hljs-string">"i"</span>,<span class="hljs-string">"if"</span>,<span class="hljs-string">"in"</span>,<span class="hljs-string">"into"</span>,<span class="hljs-string">"is"</span>,<span class="hljs-string">"it"</span>,<span class="hljs-string">"its"</span>,<span class="hljs-string">"just"</span>,<span class="hljs-string">"least"</span>,<span class="hljs-string">"let"</span>,<span class="hljs-string">"like"</span>,<span class="hljs-string">"likely"</span>,<span class="hljs-string">"may"</span>,<span class="hljs-string">"me"</span>,<span class="hljs-string">"might"</span>,<span class="hljs-string">"most"</span>,<span class="hljs-string">"must"</span>,<span class="hljs-string">"my"</span>,<span class="hljs-string">"neither"</span>,<span class="hljs-string">"no"</span>,<span class="hljs-string">"nor"</span>,<span class="hljs-string">"not"</span>,<span class="hljs-string">"of"</span>,<span class="hljs-string">"off"</span>,<span class="hljs-string">"often"</span>,<span class="hljs-string">"on"</span>,<span class="hljs-string">"only"</span>,<span class="hljs-string">"or"</span>,<span class="hljs-string">"other"</span>,<span class="hljs-string">"our"</span>,<span class="hljs-string">"own"</span>,<span class="hljs-string">"rather"</span>,<span class="hljs-string">"said"</span>,<span class="hljs-string">"say"</span>,<span class="hljs-string">"says"</span>,<span class="hljs-string">"she"</span>,<span class="hljs-string">"should"</span>,<span class="hljs-string">"since"</span>,<span class="hljs-string">"so"</span>,<span class="hljs-string">"some"</span>,<span class="hljs-string">"than"</span>,<span class="hljs-string">"that"</span>,<span class="hljs-string">"the"</span>,<span class="hljs-string">"their"</span>,<span class="hljs-string">"them"</span>,<span class="hljs-string">"then"</span>,<span class="hljs-string">"there"</span>,<span class="hljs-string">"these"</span>,<span class="hljs-string">"they"</span>,<span class="hljs-string">"this"</span>,<span class="hljs-string">"tis"</span>,<span class="hljs-string">"to"</span>,<span class="hljs-string">"too"</span>,<span class="hljs-string">"twas"</span>,<span class="hljs-string">"us"</span>,<span class="hljs-string">"wants"</span>,<span class="hljs-string">"was"</span>,<span class="hljs-string">"we"</span>,<span class="hljs-string">"were"</span>,<span class="hljs-string">"what"</span>,<span class="hljs-string">"when"</span>,<span class="hljs-string">"where"</span>,<span class="hljs-string">"which"</span>,<span class="hljs-string">"while"</span>,<span class="hljs-string">"who"</span>,<span class="hljs-string">"whom"</span>,<span class="hljs-string">"why"</span>,<span class="hljs-string">"will"</span>,<span class="hljs-string">"with"</span>,<span class="hljs-string">"would"</span>,<span class="hljs-string">"yet"</span>,<span class="hljs-string">"you"</span>,<span class="hljs-string">"your"</span>]),t.Pipeline.registerFunction(t.stopWordFilter,<span class="hljs-string">"stopWordFilter"</span>),t.trimmer=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">return</span> t.replace(<span class="hljs-regexp">/^\W+/</span>,<span class="hljs-string">""</span>).replace(<span class="hljs-regexp">/\W+$/</span>,<span class="hljs-string">""</span>)},t.Pipeline.registerFunction(t.trimmer,<span class="hljs-string">"trimmer"</span>),t.TokenStore=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">this</span>.root={<span class="hljs-attr">docs</span>:{}},<span class="hljs-keyword">this</span>.length=<span class="hljs-number">0</span>},t.TokenStore.load=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>;<span class="hljs-keyword">return</span> e.root=t.root,e.length=t.length,e},t.TokenStore.prototype.add=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e,n</span>)</span>{<span class="hljs-keyword">var</span> n=n||<span class="hljs-keyword">this</span>.root,i=t.charAt(<span class="hljs-number">0</span>),r=t.slice(<span class="hljs-number">1</span>);<span class="hljs-keyword">return</span> i <span class="hljs-keyword">in</span> n||(n[i]={<span class="hljs-attr">docs</span>:{}}),<span class="hljs-number">0</span>===r.length?(n[i].docs[e.ref]=e,<span class="hljs-keyword">void</span>(<span class="hljs-keyword">this</span>.length+=<span class="hljs-number">1</span>)):<span class="hljs-keyword">this</span>.add(r,e,n[i])},t.TokenStore.prototype.has=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">if</span>(!t)<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">this</span>.root,n=<span class="hljs-number">0</span>;n&lt;t.length;n++){<span class="hljs-keyword">if</span>(!e[t.charAt(n)])<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;e=e[t.charAt(n)]}<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>},t.TokenStore.prototype.getNode=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>)</span>{<span class="hljs-keyword">if</span>(!t)<span class="hljs-keyword">return</span>{};<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">this</span>.root,n=<span class="hljs-number">0</span>;n&lt;t.length;n++){<span class="hljs-keyword">if</span>(!e[t.charAt(n)])<span class="hljs-keyword">return</span>{};e=e[t.charAt(n)]}<span class="hljs-keyword">return</span> e},t.TokenStore.prototype.get=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getNode(t,e).docs||{}},t.TokenStore.prototype.count=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.keys(<span class="hljs-keyword">this</span>.get(t,e)).length},t.TokenStore.prototype.remove=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">if</span>(t){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">this</span>.root,i=<span class="hljs-number">0</span>;i&lt;t.length;i++){<span class="hljs-keyword">if</span>(!(t.charAt(i)<span class="hljs-keyword">in</span> n))<span class="hljs-keyword">return</span>;n=n[t.charAt(i)]}<span class="hljs-keyword">delete</span> n.docs[e]}},t.TokenStore.prototype.expand=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">this</span>.getNode(t),i=n.docs||{},e=e||[];<span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.keys(i).length&amp;&amp;e.push(t),<span class="hljs-built_in">Object</span>.keys(n).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">n</span>)</span>{<span class="hljs-string">"docs"</span>!==n&amp;&amp;e.concat(<span class="hljs-keyword">this</span>.expand(t+n,e))},<span class="hljs-keyword">this</span>),e},t.TokenStore.prototype.toJSON=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span>{<span class="hljs-attr">root</span>:<span class="hljs-keyword">this</span>.root,<span class="hljs-attr">length</span>:<span class="hljs-keyword">this</span>.length}},<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>)</span>{<span class="hljs-string">"function"</span>==<span class="hljs-keyword">typeof</span> define&amp;&amp;define.amd?define(e):<span class="hljs-string">"object"</span>==<span class="hljs-keyword">typeof</span> exports?<span class="hljs-built_in">module</span>.exports=e():t.lunr=e()}(<span class="hljs-keyword">this</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">return</span> t})}();</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
